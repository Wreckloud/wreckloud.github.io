<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="个人博客">
    
    <meta name="author" content="Wreckloud_雲之残骸">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
        
        
        
            <link rel="preconnect" href="https://evan.beee.top" crossorigin>
        
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://www.wreckloud.com/2024/09/30/猎识印记-领域/嵌入式/51单片机/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="本文将深入探讨51单片机的工作原理、编程方法和在各种电子项目中的应用，帮助读者快速掌握51单片机的使用技巧。">
<meta property="og:type" content="article">
<meta property="og:title" content="51单片机原理与应用">
<meta property="og:url" content="https://www.wreckloud.com/2024/09/30/%E7%8C%8E%E8%AF%86%E5%8D%B0%E8%AE%B0-%E9%A2%86%E5%9F%9F/%E5%B5%8C%E5%85%A5%E5%BC%8F/51%E5%8D%95%E7%89%87%E6%9C%BA/index.html">
<meta property="og:site_name" content="渊痕爪记">
<meta property="og:description" content="本文将深入探讨51单片机的工作原理、编程方法和在各种电子项目中的应用，帮助读者快速掌握51单片机的使用技巧。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E4%B8%8B%E8%BD%BDkeil.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/51%E5%8D%95%E7%89%87%E6%9C%BA.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E5%8D%95%E7%89%87%E6%9C%BA.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E9%80%89%E6%8B%A9%E6%A0%B8%E5%BF%83.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E5%AF%B9%E8%AF%9D%E6%A1%86.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%B7%BB%E5%8A%A0%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%88%90%E5%8A%9F.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E7%BC%96%E8%AF%91%E8%AE%BE%E7%BD%AE.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/LED.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/LED%E6%8E%A5%E7%BA%BF.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E7%BC%96%E8%AF%91%E6%88%90%E5%8A%9F.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%8C%89%E9%92%AE.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%8C%89%E9%92%AE%E6%8A%96%E5%8A%A8.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E5%AE%9A%E6%97%B6%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E6%9D%A5.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E5%AE%9A%E6%97%B6%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%A1%86%E5%9B%BE.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E4%B8%AD%E6%96%AD%E7%A8%8B%E5%BA%8F%E5%85%AD%E6%88%90.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E4%B8%AD%E6%96%AD%E7%B3%BB%E7%BB%9F.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E8%87%AA%E5%8A%A8%E8%AE%A1%E7%AE%97%E5%AE%9A%E6%97%B6%E5%99%A8.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%95%B0%E7%A0%81%E7%AE%A1.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/LED%E6%98%BE%E7%A4%BA%E5%99%A8%E6%8E%A5%E7%BA%BF.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/138%E8%AF%91%E7%A0%81%E5%99%A8.png">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%95%B0%E7%A0%81%E7%AE%A1%E6%AE%8B%E5%BD%B1.jpg">
<meta property="og:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B.png">
<meta property="article:published_time" content="2024-09-30T04:41:49.000Z">
<meta property="article:modified_time" content="2024-11-22T04:07:31.646Z">
<meta property="article:author" content="Wreckloud">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="单片机">
<meta property="article:tag" content="嵌入式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.wreckloud.com/img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E4%B8%8B%E8%BD%BDkeil.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/img/%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90/web.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90/web.png">
    <meta name="theme-color" content="#3f871e">
    <link rel="shortcut icon" href="/img/%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90/web.png">
    <!--- Page Info-->
    
    <title>
        
            51单片机原理与应用 | 渊痕爪记
        
    </title>

    <link rel="stylesheet" href="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/fonts/Chillax/chillax.css">

    <!--- Inject Part-->
    
        
            
    
            
    

    
<link rel="stylesheet" href="/css/style.css">


    
        <link rel="stylesheet" href="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/css/tailwind.css">
    

    <link rel="stylesheet" href="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/fonts/GeistMono/geist-mono.css">
    <link rel="stylesheet" href="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/fonts/Geist/geist.css">
    <!--- Font Part-->
    
        <link href="https://font.sec.miui.com/font/css?family=MiSans:400,700:MiSans" rel="stylesheet">
    
    
    
        <link href="https://font.sec.miui.com/font/css?family=MiSans:400,700:MiSans" rel="stylesheet">
    
    
        <link href="https://font.sec.miui.com/font/css?family=MiSans:400,700:MiSans" rel="stylesheet">
    
    
    
        <script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/anime.min.js" ></script>
    

    <script id="hexo-configurations">
    window.config = {"hostname":"www.wreckloud.com","root":"/","language":"zh-CN","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"3px","image_alignment":"center","image_caption":false,"link_icon":true,"title_alignment":"left","headings_top_spacing":{"h1":"3.2rem","h2":"2.4rem","h3":"1.9rem","h4":"1.6rem","h5":"1.4rem","h6":"1.3rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"pangu_js":false,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#3f871e","secondary":"#233f15","default_mode":"dark"},"global":{"fonts":{"chinese":{"enable":true,"family":"MiSans","url":"https://font.sec.miui.com/font/css?family=MiSans:400,700:MiSans"},"english":{"enable":true,"family":"MiSans","url":"https://font.sec.miui.com/font/css?family=MiSans:400,700:MiSans"},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":true,"custom_message":null},"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":false,"style":"static","image":{"light":"/images/light.png","dark":"/images/dark.jpg"},"title":"世界探索笔记","subtitle":{"text":["一言读取中..."],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":0,"starting_delay":1500,"backing_delay":null,"loop":false,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":"ture","family":"MiSans","url":"https://font.sec.miui.com/font/css?family=MiSans:400,700:MiSans"},"social_links":{"enable":true,"style":"default","links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":"1677820334@qq.com"},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":true,"version":"9.3.0"}},"version":"2.8.1","navbar":{"auto_hide":false,"color":{"left":"#0d0e12","right":"#56597b","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Categories":{"icon":"fa-solid fa-folder","path":"/categories/"},"画廊":{"path":"/masonry","icon":"fa-regular fa-chart-bar"},"About":{"icon":"fa-solid fa-feather","path":"/links/"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":"一只啥也不会又没人要的狼","show_on_mobile":true,"links":null},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2023/9/17 14:00:00"};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":true};
  </script>
    
    <!--- Fontawesome Part-->
    <link rel="stylesheet" href="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/fontawesome/fontawesome.min.css">
    <link rel="stylesheet" href="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/fontawesome/brands.min.css">
    <link rel="stylesheet" href="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/fontawesome/solid.min.css">
    <link rel="stylesheet" href="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/fontawesome/regular.min.css">
    
    
    
    
<meta name="generator" content="Hexo 7.3.0"></head>



<body>
	<div class="progress-bar-container">
	

	
	<span class="pjax-progress-bar"></span>
	<!--        <span class="swup-progress-icon">-->
	<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
	<!--        </span>-->
	
</div>

<style>
    :root {
        --preloader-background-color: #fff;
        --preloader-text-color: #000;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --preloader-background-color: #202124;
            --preloader-text-color: #fff;
        }
    }

    @media (prefers-color-scheme: light) {
        :root {
            --preloader-background-color: #fff;
            --preloader-text-color: #000;
        }
    }

    @media (max-width: 600px) {
        .ml13 {
            font-size: 2.6rem !important; /* Adjust this value as needed */
        }
    }

    .preloader {
        display: flex;
        flex-direction: column;
        gap: 1rem; /* Tailwind 'gap-4' is 1rem */
        align-items: center;
        justify-content: center;
        position: fixed;
        padding: 12px;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100vw;
        height: 100vh; /* 'h-screen' is 100% of the viewport height */
        background-color: var(--preloader-background-color);
        z-index: 1100; /* 'z-[1100]' sets the z-index */
        transition: opacity 0.2s ease-in-out;
    }

    .ml13 {
        font-size: 3.2rem;
        /* text-transform: uppercase; */
        color: var(--preloader-text-color);
        letter-spacing: -1px;
        font-weight: 500;
        font-family: 'Chillax-Variable', sans-serif;
        text-align: center;
    }

    .ml13 .word {
        display: inline-flex;
        flex-wrap: wrap;
        white-space: nowrap;
    }

    .ml13 .letter {
        display: inline-block;
        line-height: 1em;
    }
</style>

<div class="preloader">
    <h2 class="ml13">
        渊痕爪记
    </h2>
    <script>
        var textWrapper = document.querySelector('.ml13');
        // Split text into words
        var words = textWrapper.textContent.trim().split(' ');

        // Clear the existing content
        textWrapper.innerHTML = '';

        // Wrap each word and its letters in spans
        words.forEach(function(word) {
            var wordSpan = document.createElement('span');
            wordSpan.classList.add('word');
            wordSpan.innerHTML = word.replace(/\S/g, "<span class='letter'>$&</span>");
            textWrapper.appendChild(wordSpan);
            textWrapper.appendChild(document.createTextNode(' ')); // Add space between words
        });

        var animation = anime.timeline({ loop: true })
            .add({
                targets: '.ml13 .letter',
                translateY: [20, 0],
                translateZ: 0,
                opacity: [0, 1],
                filter: ['blur(5px)', 'blur(0px)'],
                easing: "easeOutExpo",
                duration: 1200,
                delay: (el, i) => 300 + 20 * i,
            })
            .add({
                targets: '.ml13 .letter',
                translateY: [0, -20],
                opacity: [1, 0],
                filter: ['blur(0px)', 'blur(5px)'],
                easing: "easeInExpo",
                duration: 1000,
                delay: (el, i) => 15 * i,
                complete: function() {
                    hidePreloader();
                }
            }, '-=700');


        let themeStatus = JSON.parse(localStorage.getItem('REDEFINE-THEME-STATUS'))?.isDark;

        // If the theme status is not found in local storage, check the preferred color scheme
        if (themeStatus === undefined || themeStatus === null) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                themeStatus = 'dark';
            } else {
                themeStatus = 'light';
            }
        }

        // Now you can use the themeStatus variable in your code
        if (themeStatus) {
            document.documentElement.style.setProperty('--preloader-background-color', '#202124');
            document.documentElement.style.setProperty('--preloader-text-color', '#fff');
        } else {
            document.documentElement.style.setProperty('--preloader-background-color', '#fff');
            document.documentElement.style.setProperty('--preloader-text-color', '#000');
        }

        window.addEventListener('load', function () {
            setTimeout(hidePreloader, 5000); // Call hidePreloader after 5000 milliseconds if not already called by animation
        });

        function hidePreloader() {
            var preloader = document.querySelector('.preloader');
            preloader.style.opacity = '0';
            setTimeout(function () {
                preloader.style.display = 'none';
            }, 200);
        }
    </script>
</div>

<main class="page-container" id="swup">

	

	<div class="main-content-container flex flex-col justify-between min-h-dvh">
		<div class="main-content-header">
			<header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
                <a class="logo-image h-8 w-8 sm:w-10 sm:h-10 mr-3" href="/">
                    <img src="/img/%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90/web.png" class="w-full h-full rounded-sm">
                </a>
            
            <a class="logo-title" href="/">
                
                渊痕爪记
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    狼首领地
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    爪迹年鉴
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/categories/"
                                        >
                                    <i class="fa-solid fa-folder fa-fw"></i>
                                    影踪域
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/masonry"
                                        >
                                    <i class="fa-regular fa-chart-bar fa-fw"></i>
                                    画廊
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/links/"
                                        >
                                    <i class="fa-solid fa-feather fa-fw"></i>
                                    狼影之源
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                狼首领地
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                爪迹年鉴
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/categories/"
                        >
                            <span>
                                影踪域
                            </span>
                            
                                <i class="fa-solid fa-folder fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/masonry"
                        >
                            <span>
                                画廊
                            </span>
                            
                                <i class="fa-regular fa-chart-bar fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/links/"
                        >
                            <span>
                                狼影之源
                            </span>
                            
                                <i class="fa-solid fa-feather fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">26</div>
        <div class="label text-third-text-color text-sm">影踪标签</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">11</div>
        <div class="label text-third-text-color text-sm">影踪域</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">18</div>
        <div class="label text-third-text-color text-sm">影踪记</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


		</div>

		<div class="main-content-body transition-fade-up">
			

			<div class="main-content">
				<div class="post-page-container flex relative justify-between box-border w-full h-full">
	<div class="article-content-container">

		<div class="article-title relative w-full">
			
			
			
			<img src="/img/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2/51%E5%8D%95%E7%89%87%E6%9C%BA%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8.jpg" alt="51单片机原理与应用" class="w-full h-60 sm:h-72 md:h-80 object-cover sm:rounded-t-large dark:brightness-75" />
			
			<div class="w-full flex items-center absolute bottom-0 justify-start">
				<h1 class="article-title-cover text-center mx-6 my-6 text-second-text-color bg-background-color-transparent px-4 py-3 text-3xl sm:text-4xl md:text-5xl font-semibold backdrop-blur-lg rounded-xl border border-border-color ">51单片机原理与应用</h1>
			</div>
			
		</div>

		
		<div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
			<div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
				<img src="/img/%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90/default.png">
			</div>
			<div class="info flex flex-col justify-between">
				<div class="author flex items-center">
					<span class="name text-default-text-color text-lg font-semibold">Wreckloud_雲之残骸</span>
					
					<span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv3</span>
					
				</div>
				<div class="meta-info">
					<div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2024-09-30 12:41:49</span>
        <span class="mobile">2024-09-30 12:41:49</span>
        <span class="hover-info">幽影初现</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2024-11-22 12:07:31</span>
            <span class="mobile">2024-11-22 12:07:31</span>
            <span class="hover-info">幽影变迁</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/%E7%8C%8E%E8%AF%86%E5%8D%B0%E8%AE%B0-%E9%A2%86%E5%9F%9F/">猎识印记-领域</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/%E7%8C%8E%E8%AF%86%E5%8D%B0%E8%AE%B0-%E9%A2%86%E5%9F%9F/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E5%8D%95%E7%89%87%E6%9C%BA/">单片机</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>5.1k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>20 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

				</div>
			</div>
		</div>
		

		


		<div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
			<h1 id="51单片机介绍"><a href="#51单片机介绍" class="headerlink" title="51单片机介绍"></a>51单片机介绍</h1><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>首先需要安装几个软件</p>
<a class="button  center large" target="_blank" rel="noopener" href='https://www.123684.com/s/bCMjVv-z6ot' title='开始使用'><i class='fa-solid fa-download'></i> 开始使用</a>
<h4 id="安装-Keil-集成开发环境"><a href="#安装-Keil-集成开发环境" class="headerlink" title="安装 Keil 集成开发环境"></a>安装 Keil 集成开发环境</h4><p>Keil 是用来写 C 语言程序的, 它还可以将程序编译成单片机可以识别的指令集.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E4%B8%8B%E8%BD%BDkeil.png"
                      alt="alt text"
                ></p>
<h4 id="STC-ISP-安装"><a href="#STC-ISP-安装" class="headerlink" title="STC-ISP 安装"></a>STC-ISP 安装</h4><p>STC-ISP 可以将编译好的程序下载到单片机中, 以让程序能在单片机运行.</p>
<h4 id="USB驱动"><a href="#USB驱动" class="headerlink" title="USB驱动"></a>USB驱动</h4><p>安装了串口驱动后 STC-ISP 才能识别单片机.</p>
<blockquote>
<p>由于我已经安装的时候没有截图写教程, 所以先就不写详细的安装步骤了(</p>
</blockquote>
<h3 id="51-单片机简介"><a href="#51-单片机简介" class="headerlink" title="51 单片机简介"></a>51 单片机简介</h3><p>单片机(MicrocontrollerUnit, MCU)算一种袖珍版计算机, 一个芯片就能构成完整的计算机系统.<br>单片机成本低, 体积小, 结构简单. 在学习使用单片机的过程中, 可以快速了解计算机原理与其结构.  </p>
<p>Intel 公司推出了 8051 单片机内核, 因此这种类似于 8051 内核的单片机, 我们都统称为 51 单片机.  </p>
<p>51 单片机的<br>位数: 8位.<br>RAM: 512字节.<br>ROM: 8K (Flash).<br>工作频率: 12Mhz.  </p>
<blockquote>
<p>RAM: 随机存取存储器, 用于存储程序和数据(会丢失数据, 相当于工作台).<br>ROM: 只读存储器, 用于存储程序(长期存储, 相当于仓库).  </p>
</blockquote>
<h3 id="单片机内部结构图"><a href="#单片机内部结构图" class="headerlink" title="单片机内部结构图"></a>单片机内部结构图</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/51%E5%8D%95%E7%89%87%E6%9C%BA.png"
                      alt="alt text"
                ></p>
<blockquote>
<p>乱七八糟的我也不爱看</p>
</blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E5%8D%95%E7%89%87%E6%9C%BA.png"
                      alt="alt text"
                ></p>
<h1 id="LED-灯控制"><a href="#LED-灯控制" class="headerlink" title="LED 灯控制"></a>LED 灯控制</h1><h3 id="新建一个-Keil-工程"><a href="#新建一个-Keil-工程" class="headerlink" title="新建一个 Keil 工程"></a>新建一个 Keil 工程</h3><p>为了方便导入和管理代码:</p>
<p>首先, 在电脑中新建一个文件夹, 作为所有 Keil 工程的存放位置.<br>然后, 打开 Keil 软件, 新建第一个工程文件夹.  </p>
<p>如果不这么做, 文件就会散成一团(</p>
<p>接着, 如图所示.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE.png"
                      alt="alt text"
                ></p>
<p>然后在跳出的对话框中选中 Atmel 下的 AT89C52.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E9%80%89%E6%8B%A9%E6%A0%B8%E5%BF%83.png"
                      alt="alt text"
                ></p>
<p>会有一个对话框询问是否自动创建开始文件.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E5%AF%B9%E8%AF%9D%E6%A1%86.png"
                      alt="alt text"
                ></p>
<p>推荐选 <code>否</code> ,选了是影响也不大.</p>
<p>接着, 我们要在项目中添加一个 .c 的文件, 作为程序的入口.<br>由于这个版本的 keil 不能直接新建, 所以我们得先在 <strong>系统的文件管理器</strong> 中新建文件.</p>
<p>在文件管理器中找到项目文件夹, 右键新建一个文件, 命名为 <code>main.c</code>.</p>
<p>然后在 keil 中将这个 <code>main.c</code> 文件添加到工程中.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%B7%BB%E5%8A%A0%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6.png"
                      alt="alt text"
                ></p>
<p>这样, 工程就新建完成了!  </p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%88%90%E5%8A%9F.png"
                      alt="alt text"
                ></p>
<p>接下来就可以开始编写代码了.</p>
<p>为了能在程序编译好后能直接得到 .hex 文件, 我们还得在 Keil 中设置一下编译选项.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E7%BC%96%E8%AF%91%E8%AE%BE%E7%BD%AE.png"
                      alt="alt text"
                ></p>
<p>在 <code>Output</code> 选项卡中, 勾选 <code>Create HEX file</code>.</p>
<h3 id="LED-灯控制-1"><a href="#LED-灯控制-1" class="headerlink" title="LED 灯控制"></a>LED 灯控制</h3><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/LED.png"
                      alt="alt text"
                ></p>
<p>LED 灯是指发光二极管, 它只允许电流从一个方向通过.</p>
<blockquote>
<p>当我们把电池的正极接到P型材料这一端, 负极接到N型材料这一端时, 电流就可以顺利通过LED.<br>因为电子和空穴可以分别从N型和P型材料流向对方, 然后在中间的PN结区域相遇并复合, 发出光来.<br>反之, 电子和空穴都被推向相反的方向, 就无法发光了.</p>
</blockquote>
<p>在开发板中, LED模块连接如图所示:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/LED%E6%8E%A5%E7%BA%BF.png"
                      alt="alt text"
                ></p>
<p>如图所示, LED 模块有八个 LED 灯. 右边接在 VCC ,也就是电源的正极, 左边与单片机的 P2(P2.0~P2.7) 引脚相连.</p>
<p>在 LED 与 电源正极 之间 有两个 1K 的电阻, 起到限流的作用, 防止 LED 灯发光过强而烧毁.</p>
<h4 id="如何点亮-LED-灯"><a href="#如何点亮-LED-灯" class="headerlink" title="如何点亮 LED 灯?"></a>如何点亮 LED 灯?</h4><p>为了让 LED 灯点亮, 需要在 LED 的阳极和阴极之间形成电流的通路.<br>已知 LED 灯的一侧接通的是电源正极, 我们只要能控制另一端引脚的电压即可.</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    P2 = <span class="number">0xFE</span>; <span class="comment">// 1111 1110 16进制为0xFE</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>但程序并不认识 <code>P2</code> 这个寄存器, 这时只需要导入头文件即可.</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;regx52.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    P2 = <span class="number">0xFE</span>; <span class="comment">// 1111 1110 16进制为0xFE</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>在这个头文件中就有 <code>P2</code> 这个寄存器的定义.</p>
<p>接着, 将写好的程序编译成 .hex 文件, 下载到单片机中.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E7%BC%96%E8%AF%91%E6%88%90%E5%8A%9F.png"
                      alt="alt text"
                ></p>
<h4 id="LED-流水灯"><a href="#LED-流水灯" class="headerlink" title="LED 流水灯"></a>LED 流水灯</h4><p>让 8 个 LED 灯依次点亮, 然后再依次熄灭.</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REG52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个延时函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> xms)</span>		</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> i;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span>(xms)</span><br><span class="line">	&#123;</span><br><span class="line">	i = <span class="number">500</span>;</span><br><span class="line">	<span class="keyword">while</span> (--i);</span><br><span class="line">	xms--;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        P2 = <span class="number">0xFE</span>; </span><br><span class="line">        Delay(<span class="number">800</span>);</span><br><span class="line">        P2 = <span class="number">0xFD</span>; </span><br><span class="line">        Delay(<span class="number">400</span>);</span><br><span class="line">        P2 = <span class="number">0xFB</span>; </span><br><span class="line">        Delay(<span class="number">200</span>);</span><br><span class="line">        P2 = <span class="number">0xF7</span>; </span><br><span class="line">        Delay(<span class="number">100</span>);</span><br><span class="line">        P2 = <span class="number">0xEF</span>; </span><br><span class="line">        Delay(<span class="number">100</span>);</span><br><span class="line">        P2 = <span class="number">0xDF</span>; </span><br><span class="line">        Delay(<span class="number">200</span>);</span><br><span class="line">        P2 = <span class="number">0xBF</span>; </span><br><span class="line">        Delay(<span class="number">400</span>);</span><br><span class="line">        P2 = <span class="number">0x7F</span>; </span><br><span class="line">        Delay(<span class="number">800</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></div>

<h4 id="单独操作位寄存器"><a href="#单独操作位寄存器" class="headerlink" title="单独操作位寄存器"></a>单独操作位寄存器</h4><p>在头文件 <code>regx52.h</code> 中, 我们可以看到寄存器的定义.</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sbit P2_0 = <span class="number">0xA0</span>;</span><br><span class="line">sbit P2_1 = <span class="number">0xA1</span>;</span><br><span class="line">...</span><br><span class="line">sbit P2_7 = <span class="number">0xA7</span>;</span><br></pre></td></tr></table></figure></div>

<p>我们可以直接操作这些寄存器.</p>
<blockquote>
<p>注意在 <code>reg52.h</code> 中并没有定义, 需要自己声明.</p>
</blockquote>
<h1 id="独立按键"><a href="#独立按键" class="headerlink" title="独立按键"></a>独立按键</h1><p>按钮在单片机中的接线如图所示:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%8C%89%E9%92%AE.png"
                      alt="alt text"
                ></p>
<p>按钮一端接地(电源负极), 另一端接接在单片机的 IO 口上. 当单片机接电时, IO 口为高电平, 按钮按下, 电路导通, IO 口变为低电平.</p>
<blockquote>
<p>即 按钮按下, IO 口为 ‘0’.<br>按钮松开, IO 口为 ‘1’.</p>
</blockquote>
<h3 id="按键的抖动"><a href="#按键的抖动" class="headerlink" title="按键的抖动"></a>按键的抖动</h3><p>对于机械开关,当机械触点断开, 闭合时,由于机械触点的弹性作用, 一个开关在闭合时不会马上稳定地接通, 在断开时也不会立马完全断开, 所以在开关闭合及断开的瞬间会伴随一连串的抖动.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%8C%89%E9%92%AE%E6%8A%96%E5%8A%A8.png"
                      alt="alt text"
                ></p>
<p>最方便的解决方法就是检测到按下时让程序延时一段时间即可.</p>
<p>用按钮控制 LED 灯亮灭:</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REG52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个延时函数, 抹除抖动的影响.</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> xms)</span>		</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> i;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span>(xms)</span><br><span class="line">	&#123;</span><br><span class="line">	i = <span class="number">500</span>;</span><br><span class="line">	<span class="keyword">while</span> (--i);</span><br><span class="line">	xms--;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        P2 = <span class="number">0xFE</span>; <span class="comment">// 点亮全部 LED 灯</span></span><br><span class="line">        <span class="keyword">if</span>(P2_0 == <span class="number">0</span>)&#123; <span class="comment">// 按下按钮</span></span><br><span class="line">            P2 = <span class="number">0x00</span>; <span class="comment">// 熄灭全部 LED 灯</span></span><br><span class="line">        &#125;</span><br><span class="line">        Delay(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></div>

<h1 id="定时器-计数器"><a href="#定时器-计数器" class="headerlink" title="定时器&#x2F;计数器"></a>定时器&#x2F;计数器</h1><p>在之前, 我们使用的是 <code>Delay()</code> 函数来延时, 但这种方式很不精确, 而且会占用主程序, 无法在 <code>Delay()</code> 函数执行时执行其他任务.</p>
<p>定时器就能用来实现精确的延时, 其电路的连接和运转均在单片机内部完成.</p>
<p>在 STC89C52 中, 有 T0, T1, T2 这三个定时器.<br>T0 和 T1 与传统的 51单片机 兼容, T2 则是此型号单片机增加的资源.</p>
<p>除了用作定时, 它也可用作计数器.</p>
<h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><p>定时器在单片机内部就像一个小闹钟. 根据时钟的输出信号, 每隔 <code>一个时间段</code>, 计数单元的数值就会增加一.<br>当计数单元数值增加到 <code>设定的提醒时间</code> 时, 计数单元就会向 <code>中断系统</code> 发出中断申请, 使程序跳转到中断服务函数中执行.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E5%AE%9A%E6%97%B6%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E6%9D%A5.png"
                      alt="alt text"
                ></p>
<blockquote>
<p><code>中断系统</code> 类似于 <code>定时器</code>, 也是单片机内部的资源.</p>
</blockquote>
<p>STC89C52 的 <code>定时器/计数器</code> T0, T1 都有如下几种工作模式:</p>
<ul>
<li>模式0: 13 位定时器&#x2F;计数器</li>
<li>模式1: 16 位定时器&#x2F;计数器 (常用)</li>
<li>模式2: 8 位自动重装模式</li>
<li>模式3: 两个 8 位计数器</li>
</ul>
<p>工作模式 1 的框图:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E5%AE%9A%E6%97%B6%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%A1%86%E5%9B%BE.png"
                      alt="alt text"
                ></p>
<h4 id="计数器"><a href="#计数器" class="headerlink" title="计数器"></a>计数器</h4><p>如图, 在计数器里有</p>
<ul>
<li>TL(Timer Low) : 低字节</li>
<li>TH(Timer High): 高字节</li>
</ul>
<p>两个字节, 它们总共可以存储 65536 个不同的数值.</p>
<p><code>时钟模块</code> 稳定地给 <code>计数器</code> 脉冲. 每来一次脉冲, 计数器就会增加 1.<br>直到 计数数到 65536 , 计数器溢出, 置一个标志位, 并向 <code>中断系统</code> 发出中断申请.</p>
<h4 id="定时器时钟"><a href="#定时器时钟" class="headerlink" title="定时器时钟"></a>定时器时钟</h4><p>系统时钟, 即晶振周期.</p>
<h4 id="中断系统"><a href="#中断系统" class="headerlink" title="中断系统"></a>中断系统</h4><p>中断系统是为使 CPU 具有对外界紧急事件的实时处理能力而设置的.  </p>
<p>请示 CPU 中断的请求称为中断源, 中断源的轻重缓急称之为中断优先级.<br>高优先级的中断可以打断低优先级的中断.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E4%B8%AD%E6%96%AD%E7%A8%8B%E5%BA%8F%E5%85%AD%E6%88%90.png"
                      alt="alt text"
                ></p>
<p>不同型号的单片机拥有不同的中断资源.<br>在 STC89C52 中, 中断源共有 8 个.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E4%B8%AD%E6%96%AD%E7%B3%BB%E7%BB%9F.png"
                      alt="alt text"
                ></p>
<p>不使用定时器依然可以实现延时, 可以通过查询 TF0 标志位.<br>就像你一直需要检查你的钟一样.</p>
<p>中断号:</p>
<table>
<thead>
<tr>
<th>中断源</th>
<th>中断服务函数</th>
<th>中断号</th>
</tr>
</thead>
<tbody><tr>
<td>外部中断0</td>
<td>Int0_Routine(void)</td>
<td>interrupt 0;</td>
</tr>
<tr>
<td>定时器0</td>
<td>Timer0_Routine(void)</td>
<td>interrupt 1;</td>
</tr>
<tr>
<td>外部中断1</td>
<td>Int1_Routine(void)</td>
<td>interrupt 2;</td>
</tr>
<tr>
<td>定时器1</td>
<td>Timer1_Routine(void)</td>
<td>interrupt 3;</td>
</tr>
<tr>
<td>串口中断</td>
<td>UART_Routine(void)</td>
<td>interrupt 4;</td>
</tr>
<tr>
<td>定时器2</td>
<td>Timer2_Routine(void)</td>
<td>interrupt 5;</td>
</tr>
<tr>
<td>外部中断2</td>
<td>Int2_Routine(void)</td>
<td>interrupt 6;</td>
</tr>
<tr>
<td>外部中断3</td>
<td>Int3_Routine(void)</td>
<td>interrupt 7;</td>
</tr>
</tbody></table>
<h2 id="定时器相关的寄存器"><a href="#定时器相关的寄存器" class="headerlink" title="定时器相关的寄存器"></a>定时器相关的寄存器</h2><p>寄存器是连接软硬件的桥梁, 相当于一个复杂机器的操作按钮.</p>
<p>在单片机中寄存器就是一段特殊的 RAM 存储器.<br>一方面, 寄存器可以存储和读取数据,<br>另一方面, 每一个寄存器背后都连接了一根导线, 控制着电路的连接方式.</p>
<h3 id="TCON-定时器控制寄存器"><a href="#TCON-定时器控制寄存器" class="headerlink" title="TCON 定时器控制寄存器"></a>TCON 定时器控制寄存器</h3><p>TCON(Timer Control) 为定时器&#x2F;计数器 T0, T1 的<strong>控制寄存器</strong>, 同时也锁存 T0, T1 溢出中断源和外部请求中断源等.<br>TF1, IE1, IT1等, 控制<code>定时器 T1</code>;IE0, TF0, IT0等 控制<code>定时器 T0</code>.  </p>
<blockquote>
<p>TCON 可位寻址, 因此能单独操作 TCON 寄存器的各个位.</p>
</blockquote>
<p>TCON 格式如下:</p>
<table>
<thead>
<tr>
<th>SFR name</th>
<th>Address</th>
<th>bit</th>
<th>B7</th>
<th>B6</th>
</tr>
</thead>
<tbody><tr>
<td>TCON</td>
<td>88H</td>
<td>name</td>
<td>TF1</td>
<td>TR1</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>B5</th>
<th>B4</th>
<th>B3</th>
<th>B2</th>
<th>B1</th>
<th>B0</th>
</tr>
</thead>
<tbody><tr>
<td>TF0</td>
<td>TR0</td>
<td>IE1</td>
<td>IT1</td>
<td>IE0</td>
<td>IT0</td>
</tr>
</tbody></table>
<ul>
<li>TF(Timer Flag): <code>定时器/计数器 </code> <strong>溢出标志</strong>. 当 <code>定时器</code> 的最高位高位产生溢出时, 会由硬件将 TF 置为 1 ,然后向 CPU 请求中断. 直到 CPU 响应 此中断后, 才由硬件将 TF1 复位为 0.</li>
<li>TR(Timer Run): <code>定时器/计数器 </code> 的<strong>运行控制位</strong>, 该位由软件置位和清零. 0 时停止计数, 1 时开始计数.</li>
<li>IE(Interrupt Enable): <code>定时器/计数器 </code> 的 <strong>中断使能位</strong>. IE1 &#x3D; 1 时外部中断向 CPU 请求中断, 当 CPU 响应该中断时, 由硬件清 0.</li>
<li>IT(Interrupt Type): <code>定时器/计数器 </code> 的 <strong>中断类型位</strong>. 0 时为边沿触发, 1 时为电平触发.</li>
</ul>
<h3 id="TMOD-定时器工作模式寄存器"><a href="#TMOD-定时器工作模式寄存器" class="headerlink" title="TMOD 定时器工作模式寄存器"></a>TMOD 定时器工作模式寄存器</h3><p>定时和计数功能由特<strong>殊功能寄存器</strong> TMOD(Timer Mode) , 控制着 C&#x2F;~T 进行选择.</p>
<blockquote>
<p>TMOD 不可位寻址, 只能整体赋值.</p>
</blockquote>
<table>
<thead>
<tr>
<th>7</th>
<th>6</th>
<th>5</th>
<th>4</th>
</tr>
</thead>
<tbody><tr>
<td>GATE</td>
<td>C&#x2F;~T</td>
<td>M1</td>
<td>M0</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>3</th>
<th>2</th>
<th>1</th>
<th>0</th>
</tr>
</thead>
<tbody><tr>
<td>GATE</td>
<td>C&#x2F;~T</td>
<td>M1</td>
<td>M0</td>
</tr>
</tbody></table>
<p>其中, 0<del>3 是定时器0的工作模式, 4</del>7 是定时器1的工作模式.</p>
<p>可以看出, 两个定时器各有四种操作模式, 分别是:</p>
<table>
<thead>
<tr>
<th>位</th>
<th>符号</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>TMOD.7&#x2F;<br>TMOD.3&#x2F;</td>
<td>GATE</td>
<td>控制定时器 T1, 当 GATE&#x3D;1 , 需 INT1脚 为高 且 TR1&#x3D;1 时, 才可打开 定时器T1.<br>控制定时器 T0, 当 GATE&#x3D;1 , 需 INT0脚 为高 且 TR0&#x3D;1 时, 才可打开 定时器T0.</td>
</tr>
<tr>
<td>TMOD.6&#x2F;<br>TMOD.2&#x2F;</td>
<td>C&#x2F;~T</td>
<td>控制模式为 <strong>定时(&#x3D; 0)</strong> 还是 <strong>计数(&#x3D; 1)</strong>.</td>
</tr>
<tr>
<td>TMOD.5 &amp; TMOD.4</td>
<td>M1 &amp; M0</td>
<td>控制定时器 T1 的工作模式.</td>
</tr>
<tr>
<td>TMOD.1 &amp; TMOD.0</td>
<td>M1 &amp; M0</td>
<td>控制定时器 T0 的工作模式.</td>
</tr>
</tbody></table>
<p>M1, M0 共两位, 能用来选择定时器的工作模式.<br>具体的工作模式如下:</p>
<table>
<thead>
<tr>
<th>M1</th>
<th>M0</th>
<th>工作模式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
<td>模式0:<br>13位定时器&#x2F;计数器</td>
<td>兼容 8084 定时模式, TL只用低 5 位参与分频, TH1 整个 8 位全用.</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>模式1:<br>16位定时器&#x2F;计数器</td>
<td>TL,TH 整个 16 位全用.</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>模式2:<br>8位自动重装模式</td>
<td>当溢出时将 TH1 存放的值自动装入 TL1.</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>模式3:<br>无效</td>
<td>停止计数.</td>
</tr>
</tbody></table>
<h3 id="使用定时器实现-LED-闪烁"><a href="#使用定时器实现-LED-闪烁" class="headerlink" title="使用定时器实现 LED 闪烁"></a>使用定时器实现 LED 闪烁</h3><p>接下来实践一下, 用定时器实现每隔 <strong>一秒</strong> 闪烁一次 LED 灯.</p>
<p>已知 计时器最大只能为 65535 ,我们先让计时器计数 1000 次时就溢出, 也就是先计 1微秒.<br>将计时器的初值设置为 64535 即可.</p>
<p>然后将这个 1微秒 的计时器重复 1000 次, 就是一个一秒的计时器了.</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Timer0_Init</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="comment">// 设置 TMOD定时器工作模式(不能寻址, 只能整体赋值)</span></span><br><span class="line">	TMOD = <span class="number">0x01</span>; <span class="comment">// 0000 0001 将模式设置为模式1, 使用整个TL0和TH0..</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 设置 TCON定时器控制寄存器(能寻址, 可以单独赋值)</span></span><br><span class="line">	TF0 = <span class="number">0</span>; </span><br><span class="line">	TR0 = <span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 将 64535 赋值给定时器0, 先把64535分成高8位和低8位, 然后分别赋值给TH0和TL0.</span></span><br><span class="line">	TH0 = <span class="number">64535</span>/<span class="number">256</span>;</span><br><span class="line">	TL0 = <span class="number">64535</span>%<span class="number">256</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 打开中断系统</span></span><br><span class="line">	ET0 = <span class="number">1</span>;</span><br><span class="line">	EA = <span class="number">1</span>;</span><br><span class="line">	PT0 = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">	Timer0_Init; <span class="comment">// 启动配置好的定时器0</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> T0Counter = <span class="number">0</span>; <span class="comment">// 定义一个计算定时器执行了多少次的变量, 以让1毫秒的计时器重复1000次.</span></span><br><span class="line"><span class="comment">// 定时器0中断服务程序</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Timer0_Routine</span><span class="params">()</span> interrupt 1 &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重新校对计时器, 保证下一次计时也是 1毫秒</span></span><br><span class="line">    TH0 = <span class="number">64535</span>/<span class="number">256</span>;</span><br><span class="line">	TL0 = <span class="number">64535</span>%<span class="number">256</span>;</span><br><span class="line"></span><br><span class="line">    T0Counter++; </span><br><span class="line">    <span class="keyword">if</span> (T0Counter &gt;= <span class="number">1000</span>)&#123;</span><br><span class="line">        T0Counter = <span class="number">0</span>;</span><br><span class="line">        P2_0 = ~P2_0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="TMOD-缺陷"><a href="#TMOD-缺陷" class="headerlink" title="TMOD 缺陷"></a>TMOD 缺陷</h3><p>当需要使用两个定时器时, 又由于 TMOD 只能整体赋值, 所以当给其中一个定时器赋值时, 会对另一个定时器造成影响.  </p>
<p>因此, 我们这样修改代码:</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 旧代码: TMOD = 0x01; 0000 0001, 会影响 T1 的工作模式.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 新思路: 只操作 T0 的工作模式.</span></span><br><span class="line">TMOD = TMOD &amp; <span class="number">0x0F</span>; <span class="comment">// 0000 1111 , 把 TMOD 低四位清零, 保留 T1 的工作模式.</span></span><br><span class="line">TMOD = TMOD | <span class="number">0x01</span>; <span class="comment">// 0000 0001 , 给 TMOD 低四位赋值, 使 T0 的工作模式为模式1.</span></span><br></pre></td></tr></table></figure></div>

<p>在数字电路中, 任何数 &amp; 1,都等于自身, 任何树 &amp; 0, 都等于 0.<br>利用这个特征, 我们可以只操作需要赋值的定时器.</p>
<p>让其只操作需要赋值的定时器即可.</p>
<p>在 STC-ISP 软件, 可以很方便地配置定时器: </p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E8%87%AA%E5%8A%A8%E8%AE%A1%E7%AE%97%E5%AE%9A%E6%97%B6%E5%99%A8.png"
                      alt="alt text"
                ></p>
<ul>
<li>89C52 是没有 16位自动重载的. 只有 16位 或 8位自动重载.</li>
<li>定时器时钟选中 12T</li>
<li>生成的代码没有配置中断系统, 记得加上:</li>
<li>生成的代码针对新系列单片机, 会有 <code>AUXR</code> 寄存器, 但是我们在学习的单片机没有, 因此记得删除.</li>
</ul>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EA = <span class="number">1</span>; <span class="comment">// 打开总中断</span></span><br><span class="line">ET0 = <span class="number">1</span>; <span class="comment">// 打开定时器0中断</span></span><br><span class="line">PT0 = <span class="number">0</span>; <span class="comment">// 设置优先级为0</span></span><br></pre></td></tr></table></figure></div>

<h1 id="数码管"><a href="#数码管" class="headerlink" title="数码管"></a>数码管</h1><p>LED 数码管是一种简单, 廉价的显示器, 是由多个发光二极管封装在一起组成 “8” 自型的器件.</p>
<p>LED 连接方式有两种</p>
<ul>
<li>共阴极</li>
<li>共阳极</li>
</ul>
<p>也就只是一种连接方式而已, 了解即可.</p>
<p>想要使单个 数码管 显示数字, 根据其接线口, 可以很轻易推出显示数字的值.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%95%B0%E7%A0%81%E7%AE%A1.png"
                      alt="alt text"
                ></p>
<p>例如想要显示数字 1, 则将 b, c 赋值为1.<br>赋值时注意 高位是从 DP 开始. 例如 1 就该赋值为 0000 0110.</p>
<p>其他的数字同理:</p>
<table>
<thead>
<tr>
<th>显示数字</th>
<th>二进制</th>
<th>十六进制</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0011 1111</td>
<td>0x3F</td>
</tr>
<tr>
<td>1</td>
<td>0000 0110</td>
<td>0x06</td>
</tr>
<tr>
<td>2</td>
<td>0101 1011</td>
<td>0x5B</td>
</tr>
<tr>
<td>3</td>
<td>0100 1111</td>
<td>0x4F</td>
</tr>
<tr>
<td>4</td>
<td>0110 0110</td>
<td>0x66</td>
</tr>
<tr>
<td>5</td>
<td>0110 1101</td>
<td>0x6D</td>
</tr>
<tr>
<td>6</td>
<td>0111 1101</td>
<td>0x7D</td>
</tr>
<tr>
<td>7</td>
<td>0000 0111</td>
<td>0x07</td>
</tr>
<tr>
<td>8</td>
<td>0111 1111</td>
<td>0x7F</td>
</tr>
<tr>
<td>9</td>
<td>0110 1111</td>
<td>0x6F</td>
</tr>
<tr>
<td>A</td>
<td>0111 1011</td>
<td>0x77</td>
</tr>
<tr>
<td>B</td>
<td>0111 1110</td>
<td>0x7C</td>
</tr>
<tr>
<td>C</td>
<td>0011 1001</td>
<td>0x39</td>
</tr>
<tr>
<td>D</td>
<td>0101 1110</td>
<td>0x5E</td>
</tr>
<tr>
<td>E</td>
<td>0111 1001</td>
<td>0x79</td>
</tr>
<tr>
<td>F</td>
<td>0111 1111</td>
<td>0x71</td>
</tr>
<tr>
<td>空</td>
<td>1111 1111</td>
<td>0x00</td>
</tr>
</tbody></table>
<p>四位一体数码管在单片机上接线如图所示:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/LED%E6%98%BE%E7%A4%BA%E5%99%A8%E6%8E%A5%E7%BA%BF.png"
                      alt="alt text"
                ></p>
<p>如图, 数码管的一端连接着 74HC254 , 能进行数据缓冲.  </p>
<p>由于高电平的驱动能力有限, 因此信号传输都用低电平完成. 但是直接用低电平点亮LED, 效果并不理想.<br>因此, 这个数据缓冲就是用来提高驱动能力的.<br>我们用低电平发送信号, 然后由这个数据缓冲器把信号提高到高电平来驱动 LED.</p>
<p>数码管的另一边接的就是 138 译码器, 是一种3线-8线译码器: </p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/138%E8%AF%91%E7%A0%81%E5%99%A8.png"
                      alt="alt text"
                ></p>
<p>138 译码器 只用三个 IO 端(A&#x2F;P2_2, B&#x2F;P2_3, C&#x2F;P2_4) , 就可以控制八个输出端.</p>
<p>它的工作原理是:</p>
<table>
<thead>
<tr>
<th>A, B, C</th>
<th>输出</th>
</tr>
</thead>
<tbody><tr>
<td>000</td>
<td>0 (LED 8)</td>
</tr>
<tr>
<td>001</td>
<td>1 (LED 7)</td>
</tr>
<tr>
<td>010</td>
<td>2 (LED 6)</td>
</tr>
<tr>
<td>011</td>
<td>3 (LED 5)</td>
</tr>
<tr>
<td>100</td>
<td>4 (LED 4)</td>
</tr>
<tr>
<td>101</td>
<td>5 (LED 3)</td>
</tr>
<tr>
<td>110</td>
<td>6 (LED 2)</td>
</tr>
<tr>
<td>111</td>
<td>7 (LED 1)</td>
</tr>
</tbody></table>
<p>选中的输出端, 就会输出0.</p>
<h3 id="点亮一个-LED-数码管"><a href="#点亮一个-LED-数码管" class="headerlink" title="点亮一个 LED 数码管"></a>点亮一个 LED 数码管</h3><p>那么一个 LED 数码管, 究竟是怎么样被点亮的呢?</p>
<p>第一步就是通过 138 译码器, 通过这三个口, 使某一位输出为 0 ,选中要显示的LED.<br>接下来通过缓冲送来的信号, 驱动 LED 点亮.</p>
<p>例如, 点亮 LED6, 使其显示数字 6, :<br>代码实现:</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="comment">// 选中 LED6 -&gt; </span></span><br><span class="line">	P2_4=<span class="number">1</span>;</span><br><span class="line">	P2_3=<span class="number">0</span>;</span><br><span class="line">	P2_2=<span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 设定显示的数字</span></span><br><span class="line">	P0=<span class="number">0x7D</span>;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>设计一个数码管显示数字的函数:</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设计一个数组存储每个数字对应的二进制数</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> numToHex[]=&#123;<span class="number">0x3F</span>,<span class="number">0x06</span>,<span class="number">0x5B</span>,<span class="number">0x4F</span>,<span class="number">0x66</span>,<span class="number">0x6D</span>,<span class="number">0x7D</span>,<span class="number">0x7F</span>,<span class="number">0x6F</span>,<span class="number">0x77</span>,<span class="number">0x7C</span>,<span class="number">0x39</span>,<span class="number">0x5E</span>,<span class="number">0x79</span>,<span class="number">0x71</span>,<span class="number">0x00</span>&#125;;</span><br><span class="line"><span class="comment">// 设定显示在哪一个数码管上, 以及要显示的数字</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">displayNum</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> Location, num)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(Location)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>: <span class="comment">// 数码管8 -&gt; 000</span></span><br><span class="line">            P2_4=<span class="number">0</span>;P2_3=<span class="number">0</span>;P2_2=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>: </span><br><span class="line">            P2_4=<span class="number">0</span>;P2_3=<span class="number">0</span>;P2_2=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: </span><br><span class="line">            P2_4=<span class="number">0</span>;P2_3=<span class="number">1</span>;P2_2=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>: </span><br><span class="line">            P2_4=<span class="number">0</span>;P2_3=<span class="number">1</span>;P2_2=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: </span><br><span class="line">            P2_4=<span class="number">1</span>;P2_3=<span class="number">0</span>;P2_2=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: </span><br><span class="line">            P2_4=<span class="number">1</span>;P2_3=<span class="number">0</span>;P2_2=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: </span><br><span class="line">            P2_4=<span class="number">1</span>;P2_3=<span class="number">1</span>;P2_2=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: </span><br><span class="line">            P2_4=<span class="number">1</span>;P2_3=<span class="number">1</span>;P2_2=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    P0=numToHex[num]; <span class="comment">// 设定显示的数字</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="多位数码管动态显示"><a href="#多位数码管动态显示" class="headerlink" title="多位数码管动态显示"></a>多位数码管动态显示</h3><p>由于其设计, 数码管无法做到同时显示多个数字.<br>但是我们可以快速切换显示的数字, 只要切换的足够迅速, 利用人眼的视觉暂留效应, 就可以看到”同时”显示多个数字.</p>
<p>不过如果我们直接这样写</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用刚刚设计的函数 displayNum()</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        displayNum(<span class="number">1</span>, <span class="number">1</span>); <span class="comment">// 在第一个数码管显示数字 1</span></span><br><span class="line">        displayNum(<span class="number">2</span>, <span class="number">2</span>); </span><br><span class="line">        displayNum(<span class="number">3</span>, <span class="number">3</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>会出现 数码管的残影:</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%95%B0%E7%A0%81%E7%AE%A1%E6%AE%8B%E5%BD%B1.jpg"
                      alt="alt text"
                ></p>
<p>影响数字辨认.</p>
<p>这是由于数码管显示数字时, 会先选位选(选择要在哪个数码管上显示), 然后再段选(选择要显示的数字).  </p>
<blockquote>
<p>位选 –&gt; 段选 –&gt; 位选 –&gt; 段选 –&gt; …</p>
</blockquote>
<p>由于这个过程十分迅速, 就会导致数码管串位显示, 数字显示在了错误的位置上.</p>
<p>为了解决这个问题, 可以这样做: </p>
<blockquote>
<p>位选 –&gt; 段选 –&gt; 清零 –&gt; 位选 –&gt; 段选 –&gt; 清零 –&gt; …</p>
</blockquote>
<p>代码层面, 我们可以优化一下 displayNum() 函数:</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> numToHex[]=&#123;<span class="number">0x3F</span>,<span class="number">0x06</span>,<span class="number">0x5B</span>,<span class="number">0x4F</span>,<span class="number">0x66</span>,<span class="number">0x6D</span>,<span class="number">0x7D</span>,<span class="number">0x7F</span>,<span class="number">0x6F</span>,<span class="number">0x77</span>,<span class="number">0x7C</span>,<span class="number">0x39</span>,<span class="number">0x5E</span>,<span class="number">0x79</span>,<span class="number">0x71</span>,<span class="number">0x00</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个延时函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> xms)</span>		</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> i;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span>(xms)</span><br><span class="line">	&#123;</span><br><span class="line">	i = <span class="number">500</span>;</span><br><span class="line">	<span class="keyword">while</span> (--i);</span><br><span class="line">	xms--;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">displayNum</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> Location, num)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(Location)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">            P2_4=<span class="number">0</span>;P2_3=<span class="number">0</span>;P2_2=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>: </span><br><span class="line">            P2_4=<span class="number">0</span>;P2_3=<span class="number">0</span>;P2_2=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: </span><br><span class="line">            P2_4=<span class="number">0</span>;P2_3=<span class="number">1</span>;P2_2=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>: </span><br><span class="line">            P2_4=<span class="number">0</span>;P2_3=<span class="number">1</span>;P2_2=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: </span><br><span class="line">            P2_4=<span class="number">1</span>;P2_3=<span class="number">0</span>;P2_2=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: </span><br><span class="line">            P2_4=<span class="number">1</span>;P2_3=<span class="number">0</span>;P2_2=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: </span><br><span class="line">            P2_4=<span class="number">1</span>;P2_3=<span class="number">1</span>;P2_2=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: </span><br><span class="line">            P2_4=<span class="number">1</span>;P2_3=<span class="number">1</span>;P2_2=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    P0=numToHex[num]; </span><br><span class="line">	Delay(<span class="number">5</span>);</span><br><span class="line">    P0=numToHex[<span class="number">0</span>]; <span class="comment">// 清零</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		displayNum(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">		displayNum(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">		displayNum(<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="模块化编程"><a href="#模块化编程" class="headerlink" title="模块化编程"></a>模块化编程</h3><p>众所周知, 程序员最不喜欢一直做重复的事. 像之前提到的 Delay(), 我们可以把它封装成一个函数, 然后在其他地方调用, 就不用每次都要写一遍.</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../../img/%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87/51%E5%8D%95%E7%89%87%E6%9C%BA/%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B.png"
                      alt="alt text"
                ></p>
<h4 id="C预编译"><a href="#C预编译" class="headerlink" title="C预编译"></a>C预编译</h4><p>C语言的预编译以 # 开头, 作用是在珍珠的编译开始之前, 对代码做一些预处理(预编译)</p>
<table>
<thead>
<tr>
<th>预编译</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>#include</td>
<td>包含头文件</td>
</tr>
<tr>
<td>#define</td>
<td>定义常量</td>
</tr>
<tr>
<td>#ifndef</td>
<td>防止头文件重复包含</td>
</tr>
<tr>
<td>#endif</td>
<td>结束头文件包含</td>
</tr>
</tbody></table>
<p>接下来, 尝试一下将之前写的 Delay() 函数模块化.</p>
<p>首先创建工程, 完成一些基本操作:</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span> <span class="comment">// &lt;&gt; 表示在安装目录寻找头文件</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;delay.h&quot;</span> <span class="comment">// &quot;&quot; 表示在当前工程目录寻找头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        Dlay(<span class="number">500</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>然后在工程目录下创建 delay.h 和 delay.c 文件:</p>
<p>delay.c 存放函数实现:</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个延时函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> xms)</span>		</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> i;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span>(xms)</span><br><span class="line">	&#123;</span><br><span class="line">	i = <span class="number">500</span>;</span><br><span class="line">	<span class="keyword">while</span> (--i);</span><br><span class="line">	xms--;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>delay.h 存放函数声明:</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __DELAY_H__ <span class="comment">// 命名一般以这样的形式定义, 全大写, 下划线分隔.</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __DELAY_H__ <span class="comment">// 防止头文件重复包含,如果没有这个名字, 就创建.</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明函数</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> xms)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> </span></span><br></pre></td></tr></table></figure></div>

<h1 id="矩阵键盘"><a href="#矩阵键盘" class="headerlink" title="矩阵键盘"></a>矩阵键盘</h1>
		</div>

		
		<div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
			<div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> 51单片机原理与应用</li>
        <li><strong>作者:</strong> Wreckloud_雲之残骸</li>
        <li><strong>此记初现于
                :</strong> 2024-09-30 12:41:49</li>
        
            <li>
                <strong>此记变迁于
                    :</strong> 2024-11-22 12:07:31
            </li>
        
        <li>
            <strong>链接:</strong> https://www.wreckloud.com/2024/09/30/猎识印记-领域/嵌入式/51单片机/
        </li>
        <li>
            <strong>
                版权声明:
            </strong>
            

            
                本幽影记采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> 进行许可。
            
        </li>
    </ul>
</div>

		</div>
		

		
		<ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
			
			<li class="tag-item mx-0.5">
				<a href="/tags/%E7%AC%94%E8%AE%B0/">#笔记</a>&nbsp;
			</li>
			
			<li class="tag-item mx-0.5">
				<a href="/tags/%E5%8D%95%E7%89%87%E6%9C%BA/">#单片机</a>&nbsp;
			</li>
			
			<li class="tag-item mx-0.5">
				<a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">#嵌入式</a>&nbsp;
			</li>
			
		</ul>
		

		

		
		<div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
			
			<div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="prev" rel="prev" href="/2024/11/21/%E7%8C%8E%E8%AF%86%E5%8D%B0%E8%AE%B0-%E9%A2%86%E5%9F%9F/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E5%89%8D%E7%AB%AF/%E5%88%9D%E8%AF%86Web%E5%89%8D%E7%AB%AF/">
					<span class="left arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-left"></i>
					</span>
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">初识Web前端</span>
						<span class="post-nav-item">上一篇</span>
					</span>
				</a>
			</div>
			
			
			<div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="next" rel="next" href="/2024/09/27/%E7%8C%8E%E8%AF%86%E5%8D%B0%E8%AE%B0-%E9%A2%86%E5%9F%9F/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E5%AE%89%E8%A3%85/">
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">MySQL安装</span>
						<span class="post-nav-item">下一篇</span>
					</span>
					<span class="right arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-right"></i>
					</span>
				</a>
			</div>
			
		</div>
		


		
		<div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
			<div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        影踪语
    </div>
    

        
            
    <div class="twikoo-container">
        <script data-swup-reload-script
                src='https://cdnjs.cloudflare.com/ajax/libs/twikoo/1.6.10/twikoo.all.min.js'
        ></script>
        <div id="twikoo-comment"></div>
        <script data-swup-reload-script>
            function loadTwikoo() {
                twikoo.init({
                    el: '#twikoo-comment',
                    envId: 'https://wreckloud-twikoo.hf.space',
                });
            }

            if ('true') {
                const loadTwikooTimeout = setTimeout(() => {
                    loadTwikoo();
                    clearTimeout(loadTwikooTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadTwikoo);
            }
        </script>
    </div>


        
        
    
</div>

		</div>
		
	</div>

	
	<div class="toc-content-container">
		<div class="post-toc-wrap">
	<div class="post-toc">
		<div class="toc-title">此页目录</div>
		<div class="page-title">51单片机原理与应用</div>
		<ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#51%E5%8D%95%E7%89%87%E6%9C%BA%E4%BB%8B%E7%BB%8D"><span class="nav-text">51单片机介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-text">准备工作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#51-%E5%8D%95%E7%89%87%E6%9C%BA%E7%AE%80%E4%BB%8B"><span class="nav-text">51 单片机简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E7%89%87%E6%9C%BA%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84%E5%9B%BE"><span class="nav-text">单片机内部结构图</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#LED-%E7%81%AF%E6%8E%A7%E5%88%B6"><span class="nav-text">LED 灯控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA-Keil-%E5%B7%A5%E7%A8%8B"><span class="nav-text">新建一个 Keil 工程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LED-%E7%81%AF%E6%8E%A7%E5%88%B6-1"><span class="nav-text">LED 灯控制</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%8B%AC%E7%AB%8B%E6%8C%89%E9%94%AE"><span class="nav-text">独立按键</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E9%94%AE%E7%9A%84%E6%8A%96%E5%8A%A8"><span class="nav-text">按键的抖动</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8-%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="nav-text">定时器&#x2F;计数器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">工作原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9B%B8%E5%85%B3%E7%9A%84%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-text">定时器相关的寄存器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TCON-%E5%AE%9A%E6%97%B6%E5%99%A8%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-text">TCON 定时器控制寄存器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TMOD-%E5%AE%9A%E6%97%B6%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-text">TMOD 定时器工作模式寄存器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%AE%9A%E6%97%B6%E5%99%A8%E5%AE%9E%E7%8E%B0-LED-%E9%97%AA%E7%83%81"><span class="nav-text">使用定时器实现 LED 闪烁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TMOD-%E7%BC%BA%E9%99%B7"><span class="nav-text">TMOD 缺陷</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E7%A0%81%E7%AE%A1"><span class="nav-text">数码管</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E4%BA%AE%E4%B8%80%E4%B8%AA-LED-%E6%95%B0%E7%A0%81%E7%AE%A1"><span class="nav-text">点亮一个 LED 数码管</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E4%BD%8D%E6%95%B0%E7%A0%81%E7%AE%A1%E5%8A%A8%E6%80%81%E6%98%BE%E7%A4%BA"><span class="nav-text">多位数码管动态显示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B"><span class="nav-text">模块化编程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9F%A9%E9%98%B5%E9%94%AE%E7%9B%98"><span class="nav-text">矩阵键盘</span></a></li></ol>

	</div>
</div>
	</div>
	
</div>
			</div>

			
		</div>

		<div class="main-content-footer">
			<footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
            <div class="customize-info my-1">死亡是涅灭,抑或是永恒?</div>
        
        <div class="text-center">
            &copy;
            
              <span>2023</span>
              -
            
            2024&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Wreckloud_雲之残骸</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        共 18 篇幽影记
                    </span>
                    
                        <span>
                            共 52.9k 字
                        </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://cn.vercount.one/js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">造访爪迹</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">总访问量</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">幽影之力由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 提供</span>
            <span class="text-sm lg:block">幽影之裳由&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.1</a></span>
        </div>
        
        
            <div>
                狼已独自行进 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
            
                
        
                
        
                

                    
                        <style> html * {border-radius:3px!important;}</style>
                    
        
        
    </div>  
</footer>
		</div>
	</div>

	
	<div class="post-tools">
		<div class="post-tools-container">
	<ul class="article-tools-list">
		<!-- TOC aside toggle -->
		
		<li class="right-bottom-tools page-aside-toggle">
			<i class="fa-regular fa-outdent"></i>
		</li>
		

		<!-- go comment -->
		
		<li class="go-comment">
			<i class="fa-regular fa-comments"></i>
		</li>
		
	</ul>
</div>
	</div>
	

	<div class="right-side-tools-container">
		<div class="side-tools-container">
	<ul class="hidden-tools-list">
		<li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-plus"></i>
		</li>

		<li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-minus"></i>
		</li>

		<li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
			<i class="fa-regular fa-moon"></i>
		</li>

		<!-- rss -->
		

		

		<li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
			<i class="fa-regular fa-arrow-down"></i>
		</li>
	</ul>

	<ul class="visible-tools-list">
		<li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
			<i class="fa-regular fa-cog fa-spin"></i>
		</li>
		
		<li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
			<i class="arrow-up fas fa-arrow-up"></i>
			<span class="percent"></span>
		</li>
		
		
	</ul>
</div>
	</div>

	<div class="image-viewer-container">
	<img src="">
</div>

	
	<div class="search-pop-overlay">
	<div class="popup search-popup">
		<div class="search-header">
			<span class="search-input-field-pre">
				<i class="fa-solid fa-keyboard"></i>
			</span>
			<div class="search-input-container">
				<input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="寻觅..." spellcheck="false" type="search" class="search-input">
			</div>
			<span class="popup-btn-close">
				<i class="fa-solid fa-times"></i>
			</span>
		</div>
		<div id="search-result">
			<div id="no-result">
				<i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
			</div>
		</div>
	</div>
</div>
	

</main>


<script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/Swup.min.js" ></script><script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/SwupSlideTheme.min.js" ></script><script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/SwupScriptsPlugin.min.js" ></script><script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/SwupProgressPlugin.min.js" ></script><script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/SwupScrollPlugin.min.js" ></script><script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/SwupPreloadPlugin.min.js" ></script>
<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>




	<script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/tools/imageViewer.js" ></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/utils.js" ></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/main.js" ></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/layouts/navbarShrink.js" ></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/tools/scrollTopBottom.js" ></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/tools/lightDarkSwitch.js" ></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/layouts/categoryList.js" ></script>


    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/tools/localSearch.js" ></script>



    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/tools/codeBlock.js" ></script>



    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/layouts/lazyload.js" ></script>



    <script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/tools/runtime.js" ></script>
    <script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/odometer.min.js" ></script>
    <link rel="stylesheet" href="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/assets/odometer-theme-minimal.css">



  <script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/Typed.min.js" ></script>
  <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/plugins/typed.js" ></script>



    <script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/mermaid.min.js" ></script>
    <script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/plugins/mermaid.js" ></script>



    <script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/minimasonry.min.js" ></script>
    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/plugins/masonry.js" ></script>






    <script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/tools/tocToggle.js" data-swup-reload-script></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/layouts/toc.js" data-swup-reload-script></script><script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/plugins/tabs.js" data-swup-reload-script></script>


<script  src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/libs/moment-with-locales.min.js" data-swup-reload-script></script>
<script type="module" src="https://evan.beee.top/projects/hexo-theme-redefine@2.8.1/source/build/js/layouts/essays.js" data-swup-reload-script></script>




	
</body>

</html>